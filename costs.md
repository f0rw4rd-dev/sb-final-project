# Стоимость владения системой

Приблизительная модель роста:
* Год 1: от 100 тыс. до 500 тыс. ежемесячно активных пользователей (MAU).
* Год 2: рост до нескольких миллионов MAU.
* Год 5: десятки миллионов MAU, глобальное покрытие.

На стоимость сильно влияют:
* Точные данные нагрузки.
* Объемы и типы хранимых данных (текст, фото, видео).
* Регионы развертывания (США, Европа, Азия, локальные требования).
* Выбор Managed-сервисов и степень оптимизации (автоскейлинг, CDN).
* Сеть и выходной трафик.

## Год 1: Старт (MVP) + начальный рост

1. Kubernetes (EKS):
   * Один регион (например, Европа).
   * ~10 узлов (EC2 типа m5.xlarge или c5.xlarge) для прод-окружения.
   * Пара узлов для dev/stage окружений.
2. Managed DB (операционные базы в RDS/Aurora).
   * Небольшие инстансы (db.m5.large или db.m5.xlarge), multi-AZ.
   * Объем 100–200 ГБ данных.
3. Аналитическая БД (Redshift / BigQuery / Snowflake).
   * Малый кластер (2–4 узла), ~1 ТБ данных.
4. Kafka (Amazon MSK).
   * Минимальный производственный кластер (3 брокера).
5. S3 для хранения медиа.
   * ~10 ТБ, растущие по 1–2 ТБ в месяц.
6. Наблюдаемость.
   * Prometheus/Grafana, и ELK/Loki для логов.
7. Трафик.
   * 20 ТБ/месяц исходящего трафика (внешний).

Примерная месячная стоимость (AWS):
* Compute (EC2/EKS):
  * ~ 5–7 тыс. USD/мес.
* RDS / Aurora:
  * ~ 1–2 тыс. USD/мес (зависит от объема и количества инстансов).
* Redshift / BigQuery:
  * ~1–2 тыс. USD/мес (небольшой кластер).
* Kafka (MSK):
  * ~ 500–1000 USD/мес (3 брокера, небольшие инстансы + хранилище).
* S3:
  * ~ 200–300 USD/мес за 10 ТБ (стандартный класс хранения) + некоторый "выходной" трафик.
* Трафик (Data Transfer OUT):
  * ~ 200–1000 USD/мес при 20 ТБ внешнего трафика (зависит от региона и тарифов).
* Логи / Метрики:
  * Если пользоваться ELK на своих серверах, это дополнительные узлы EC2.
  * Или Managed OpenSearch / Datadog / New Relic - тогда может быть еще 500–2000 USD/мес.

Итого в месяц (1 год):
* Суммарно: 10–15 тыс. USD/месяц (в минимальной конфигурации) до 20–25 тыс. USD/месяц, если учесть более крупные инстансы, доп. окружения и резервы.

За первый год (с учетом постепенного увеличения ресурсов к концу года), TCO по инфраструктуре может составить:
* Около 12-20 тыс. USD (в среднем ежемесячно) и 150-240 тыс. USD в год.
* В крупных сценариях (широкий маркетинг, быстрый взрывной рост) - это легко может достичь 300–500 тыс. USD и выше за год по облачным счетам.

## Год 2: Несколько миллионов MAU

1. Kubernetes:
   * 30–50 узлов для прода, больше микросервисов, больше автоскейлинга.
   * Возможен второй регион (например, USA) для более быстрой доставки и снижения задержек.
2. RDS / Aurora:
   * Более крупные инстансы (db.m5.2xlarge), многотерабайтные хранилища.
3. Аналитическая БД:
   * Кластер 4–8 узлов Redshift / BigQuery, объемы данных 5–10 ТБ.
4. Kafka (MSK):
   * 5–6 брокеров с большим объемом хранения.
5. S3:
   * 50–100 ТБ.
6. Трафик:
   * До 100 ТБ/месяц исходящего.

Примерная месячная стоимость (AWS):
* Compute EKS:
  * ~ 15–30 тыс. USD/мес (учитывая масштаб и 2 региона).
* RDS / Aurora:
  * ~ 5–10 тыс. USD/мес (зависит от размеров, IOPS).
* Redshift / BigQuery:
  * ~ 5–10 тыс. USD/мес (прием и обработка больших данных).
* Kafka (MSK):
  * ~ 2–5 тыс. USD/мес.
* S3:
  * ~ 1–2 тыс. USD/мес за 50–100 ТБ (+ трафик).
* Исходящий трафик (100 ТБ/мес):
  * ~ 5–10 тыс. USD/мес, в зависимости от региона.
* Мониторинг / Логирование:
  * ~ 3–5 тыс. USD/мес при больших объемах логов (ELK/OpenSearch/Datadog).

Итого в месяц (2 год):
* Общий порядок: 40–70 тыс. USD/месяц (или 480–840 тыс. USD в год). При еще более активном росте (дополнительные регионы, мегапопулярная соц. функциональность) сумма может достичь 1+ млн USD за год только за инфраструктуру.

## Год 5: Десятки миллион MAU

1. Multi-Region / Global развертывание (3+ региона AWS).
2. Сотни узлов Kubernetes, распределенные кластеры, сложная топология микросервисов.
3. Data Lake и мощные аналитические кластеры (десятки ТБ оперативной статистики, сотни ТБ исторических данных).
4. Высокие требования к отказоустойчивости, гео-репликации, CDN.
5. Медиафайлы могут исчисляться петабайтами через несколько лет активного использования (зависит от того, будут ли пользователи активно делиться видео и т. п.).

Примерная месячная стоимость (AWS):
* Kubernetes (EKS):
  * 100–200+ узлов и стоимость 100–200 тыс. USD в месяц (включая большую часть compute/EC2).
* Базы данных (Aurora, DynamoDB, и/или Cassandra на EC2):
  * Десятки тыс. USD в месяц каждая, при больших объемах (терабайты/петабайты).
* Аналитика (Redshift / BigQuery / EMR):
  * 50–100+ тыс. USD в месяц (большие объемы, сложные запросы).
* Kafka:
  * 10–15+ тыс. USD в месяц при глобальной нагрузке, объеме хранения, количестве брокеров.
* Object Storage (S3):
  * 10–50+ тыс. USD в месяц за хранение (зависит от классa S3 и интенсивности доступа).
* Исходящий трафик:
  * 10-50+ тыс. USD в месяц.
* Мониторинг / Логирование:
  * ELK/OpenSearch для ПБ логов/год, Datadog/APM и т. д. - десятки тысяч USD/мес.

Итого в месяц (5 год):
* 200–500 тыс. USD/мес (или 2–6 млн USD в год).

Суммируя все вышесказанное, примерный уровень затрат на инфраструктуру может выглядеть так:
1. Год 1: 150–300 тыс. USD в год (10–25 тыс. USD/мес).
2. Год 2: 0.5-1 млн USD в год (40–80 тыс. USD/мес).
3. Год 5: 2–6+ млн USD в год (и выше) (200–500 тыс. USD/мес).

## Навигация

1. [Бизнес-цели](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/business_objectives.md)
2. [Функциональные требования](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/functional_requirements.md)
3. [Стейкхолдеры](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/stakeholders.md)
4. [Концептуальная архитектура](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/concept_architecture.md)
5. [Риски реализации](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/implementation_risks.md)
6. [План поэтапной разработки и расширения системы, анализ критически важных компонентов](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/development_plan.md)
7. [Критические бизнес-сценарии](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/critical_business_scenarios.md)
8. [Атрибуты качества](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/quality_attributes.md)
9. [Нефункциональные требования](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/nonfunctional_requirements.md)
10. [Архитектурные опции](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/architectural_options.md)
11. Список ADR
    1. [Выбор микросервисной архитектуры](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/adr_01.md)
    2. [Использование контейнеризации (Docker/Kubernetes)](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/adr_02.md)
    3. [Хранение пользовательских данных](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/adr_03.md)
    4. [Выделение БД для аналитики](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/adr_04.md)
    5. [Аутентификация и авторизация (OAuth2 / OpenID Connect)](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/adr_05.md)
    6. [Наблюдаемость (Observability)](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/adr_06.md)
12. [Описание сценариев использования приложения](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/use_cases.md)
13. [Базовая архитектура](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/basic_architecture.md)
14. [Основные представления](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/views.md)
15. [Анализ рисков созданной архитектуры, компромиссов](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/architecture_risks.md)
16. [Стоимость владения системой](https://github.com/f0rw4rd-dev/sb-final-project/blob/main/costs.md)